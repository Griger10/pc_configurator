<UserControl x:Class="PCConfigurator.UI.Views.ConfiguratorView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!-- Заголовок -->
        <Border Grid.Row="0" Background="White" Padding="20,14"
                BorderBrush="#E0E0E0" BorderThickness="0,0,0,1">
            <TextBlock Text="Новая сборка" Style="{StaticResource PageTitleStyle}" />
        </Border>

        <!-- Форма -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel Margin="24" MaxWidth="560">

                <!-- Название конфигурации -->
                <TextBlock Text="Название конфигурации *" FontWeight="SemiBold" Margin="0,0,0,4" />
                <TextBox Text="{Binding ConfigName, UpdateSourceTrigger=PropertyChanged}"
                         Padding="8,6" Margin="0,0,0,16"
                         BorderBrush="#C0C0C8" BorderThickness="1" />

                <!-- Процессор -->
                <TextBlock Text="Процессор *" FontWeight="SemiBold" Margin="0,0,0,4" />
                <ComboBox ItemsSource="{Binding AvailableProcessors}"
                          SelectedItem="{Binding SelectedProcessor}"
                          Padding="8,6" Margin="0,0,0,16">
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock>
                                <Run Text="{Binding Manufacturer.Name}" />
                                <Run Text=" " />
                                <Run Text="{Binding Model}" />
                                <Run Text=" (" />
                                <Run Text="{Binding Socket}" />
                                <Run Text=", " />
                                <Run Text="{Binding Price, StringFormat=N0}" />
                                <Run Text=" ₽)" />
                            </TextBlock>
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>

                <!-- Материнская плата -->
                <TextBlock Text="Материнская плата *" FontWeight="SemiBold" Margin="0,0,0,4" />
                <ComboBox ItemsSource="{Binding AvailableMotherboards}"
                          SelectedItem="{Binding SelectedMotherboard}"
                          Padding="8,6" Margin="0,0,0,16">
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock>
                                <Run Text="{Binding Manufacturer.Name}" />
                                <Run Text=" " />
                                <Run Text="{Binding Model}" />
                                <Run Text=" (" />
                                <Run Text="{Binding Socket}" />
                                <Run Text=", " />
                                <Run Text="{Binding Price, StringFormat=N0}" />
                                <Run Text=" ₽)" />
                            </TextBlock>
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>

                <!-- Видеокарта (необязательно) -->
                <TextBlock Text="Видеокарта" FontWeight="SemiBold" Margin="0,0,0,4" />
                <ComboBox ItemsSource="{Binding AvailableGpus}"
                          SelectedItem="{Binding SelectedGpu}"
                          Padding="8,6" Margin="0,0,0,24">
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock>
                                <Run Text="{Binding Manufacturer.Name}" />
                                <Run Text=" " />
                                <Run Text="{Binding Model}" />
                                <Run Text=" (" />
                                <Run Text="{Binding Memory}" />
                                <Run Text=" ГБ, " />
                                <Run Text="{Binding Price, StringFormat=N0}" />
                                <Run Text=" ₽)" />
                            </TextBlock>
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>

                <!-- Итоговая цена -->
                <Border Background="#EEF4FF" CornerRadius="6" Padding="16,12" Margin="0,0,0,20">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Итоговая цена: " FontWeight="SemiBold" FontSize="16" />
                        <TextBlock Text="{Binding TotalPrice, StringFormat=N2}"
                                   FontWeight="Bold" FontSize="16" Foreground="#4A90D9" />
                        <TextBlock Text=" ₽" FontSize="16" />
                    </StackPanel>
                </Border>

                <!-- Кнопки -->
                <StackPanel Orientation="Horizontal">
                    <Button Content="Сохранить конфигурацию"
                            Command="{Binding SaveCommand}"
                            Style="{StaticResource ActionButtonStyle}"
                            Padding="20,10" Margin="0,0,12,0" />
                    <Button Content="Сбросить"
                            Command="{Binding ResetCommand}"
                            Padding="16,10"
                            Background="#E0E0E8" Foreground="#333"
                            BorderThickness="0" Cursor="Hand" />
                </StackPanel>

                <!-- Статусное сообщение -->
                <TextBlock Text="{Binding StatusMessage}"
                           Margin="0,14,0,0"
                           Foreground="#2E7D32"
                           FontStyle="Italic"
                           TextWrapping="Wrap" />
            </StackPanel>
        </ScrollViewer>
    </Grid>
</UserControl>
